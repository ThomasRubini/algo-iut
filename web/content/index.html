<!DOCTYPE html>
<!--
Copyright 2018 The Go Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<html>
  <head>
    <meta charset="utf-8" />
    <title>Go wasm</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <script src="wasm_exec.js"></script>
    <script src="script.js"></script>

    <script>
      initWasm();
    </script>

    <textarea id="left" placeholder="Type here..."></textarea>
    <textarea id="right" placeholder="Translation will appear here..." readonly></textarea>

    <script>
      let typingTimer;
      const transpileDelay = 200; // 0.5s
        document.getElementById('left').addEventListener('input', () => {

          clearTimeout(typingTimer); // Clear previous timer
          typingTimer = setTimeout(() => {
            const inputText = document.getElementById('left').value;
            
            let [outputText, logs] = transpile(inputText)

            document.getElementById('right').value = outputText;
          })
        });
    </script>
  </body>
</html>